# 功能模块: 设置中心 (Settings Center)

## 1. 功能身份与核心目标 (Feature Identity & Core Goal)

本功能模块是整个应用的“控制室”，它提供了一个统一的、可扩展的界面，用于管理应用的所有配置项。

**核心目标**: 实现一个**由业务模块动态注入**的中心化设置管理系统。它必须是清晰、一致且易于扩展的，让用户可以轻松找到并修改所需配置，同时允许其他功能模块（如`ai_chat`）无缝地将其自身的设置项注册到此中心。

## 2. 核心架构: 动态注入模式 (Core Architecture: Dynamic Injection Model)

设置中心的核心是其**可扩展性**。它自身不硬编码具体的设置项，而是提供一个注册机制，允许其他业务模块将自己的配置界面“挂载”进来。

1.  **设置分区 (Setting Sections)**: 设置中心按功能逻辑划分为多个分区（如通用、外观、AI配置等）。每个分区都是一个独立的导航入口。
2.  **设置项 (Setting Items)**: 每个分区内包含多个具体的设置项，如开关（Toggle）、下拉选择（Select）、文本输入（Text Input）等。
3.  **注册机制**: 一个全局的 `SettingManager` 服务将暴露 `registerSection` 和 `registerItem` 等接口。其他模块（如 `AIChatModule`）在初始化时，调用这些接口，将其专有的设置项（例如 `API Key` 输入框）动态添加到指定的设置分区中。

## 3. 核心布局与组件 (Core Layout & Components)

设置页面采用经典的桌面应用布局：

*   **左侧导航栏**: 固定宽度的垂直列表，展示所有已注册的设置分区。用户点击后，右侧内容区会相应更新。
*   **右侧内容区**: 自适应宽度的区域，用于展示当前选中分区下的所有设置项。内容区本身应支持滚动。

## 4. 关键用户故事 (Key User Stories)

*   **作为用户**: 我可以在左侧清晰地看到所有可配置的功能分区，并能在它们之间轻松切换。
*   **作为用户**: 我可以在右侧看到与所选分区相关的具体设置项，并能通过开关、输入框等控件进行修改。
*   **作为用户**: 我的所有修改都应该被即时保存，并在整个应用中立刻生效。
*   **作为开发者**: 我可以在我自己的业务模块中定义一组设置项，并通过调用 `SettingManager` 的接口，将它们方便地注册到设置中心的某个指定分区下，而无需修改设置中心本身的任何代码。

## 5. 架构蓝图 (Architectural Blueprint)

*   **状态与逻辑**: `SettingController` 负责管理设置页面的UI状态（如当前选中的分区）。而所有设置项的**值**由全局单例 `SettingManager` 结合本地存储（如 `GetStorage`）进行管理。
*   **数据模型**: 
    *   `SettingSection`: 定义一个设置分区（包含ID、标题、图标等）。
    *   `SettingItem`: 定义一个具体的设置项（包含ID、标题、类型、默认值、所属分区等）。
*   **服务**: 全局单例 `SettingManager` 是架构的核心，它维护着所有注册的设置项，并提供读取、写入和持久化设置值的能力。

在执行任何与“设置”相关的任务时，你必须首先思考它是属于平台层（定义框架）还是业务层（注册具体设置项），并遵循动态注入的核心模式。
