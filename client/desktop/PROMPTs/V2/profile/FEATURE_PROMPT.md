# 功能模块: 个人资料 (Profile)

## 1. 功能身份与核心目标 (Feature Identity & Core Goal)

本功能模块是用户在Peers-Touch联邦网络中的“数字身份”展示与管理中心。它不仅仅是一个简单的信息页面，更是用户隐私控制和联邦身份管理的核心界面。

**核心目标**: 设计并实现一个以**隐私优先**为原则的个人资料页面。它需要清晰地展示用户的联邦身份信息，同时提供强大的、细粒度的隐私控制选项，并为未来的联邦迁移、密钥管理等高级功能打下基础。

## 2. 核心设计原则 (Core Design Principles)

*   **最小化信息披露**: 默认情况下，只展示最基本、非敏感的公开信息。所有敏感或个人信息的展示都应是可选的或有明确的可见性级别。
*   **用户拥有控制权**: 用户必须能够轻松地控制其个人资料中几乎所有字段的可见性（例如，粉丝数、动态等），以及谁可以与他们互动（例如，谁可以发送消息）。
*   - **联邦身份为核心**: 页面设计应突出用户的联邦属性，如 `@handle`、`ActorID` 和所属服务器域名，而不仅仅是本地的显示昵称。

## 3. 核心布局与组件 (Core Layout & Components)

1.  **顶部个人卡片 (Profile Card)**:
    *   **职责**: 提供用户身份的快速概览。
    *   **关键元素**: 头像、显示名、`@handle`、简介摘要，以及一组核心操作按钮（如“发消息”、“关注/取消关注”）。

2.  **内容分区 (Content Sections/Tabs)**:
    *   **职责**: 分类展示用户的详细信息和相关设置。
    *   **关键元素**: 
        *   **资料 (Profile Details)**: 展示更详细的个人信息，并提供编辑入口。
        *   **隐私与安全 (Privacy & Security)**: 提供对个人资料可见性、消息权限等的控制选项。
        *   **联邦与迁移 (Federation & Migration)**: （为未来预留）用于处理密钥管理、服务器迁移等高级联邦操作。
        *   **数据与备份 (Data & Backup)**: 提供数据导出和导入功能。

## 4. 关键用户故事 (Key User Stories)

*   **作为用户**: 我可以查看我的个人资料页面，它清晰地展示了我的头像、昵称、`@handle` 和简介。
*   **作为用户**: 我可以编辑我的个人资料，并为每个字段设置不同的可见性级别（如公开、仅粉丝可见、私密）。
*   **作为用户**: 我可以设置谁有权限给我发送消息（例如，任何人、我关注的人、无人）。
*   **作为用户**: 我可以轻松地找到并点击“关注”或“发消息”按钮来与其他用户互动。
*   **作为用户**: 我可以找到数据导出功能，将我的个人数据备份到本地。

## 5. 架构蓝图 (Architectural Blueprint)

*   **状态与逻辑**: `ProfileController` 负责获取和管理 `UserDetail` 数据，并处理页面上的所有用户交互，如编辑、保存设置等。
*   **数据模型**: `UserDetail` 是本功能的核心模型，它不仅包含用户的基本信息（姓名、头像等），还必须包含所有与隐私设置和联邦身份相关的字段（如 `defaultVisibility`, `manuallyApprovesFollowers`, `actorUrl` 等）。
*   **服务**: 与后端的交互（获取用户资料、更新设置）应通过专门的 `ProfileService` 或通用的 `ApiService` 来完成。

在执行任何与“个人资料”相关的任务时，你必须始终将“隐私控制”和“联邦身份”作为首要考虑因素，确保你的实现能够体现这些核心价值。
