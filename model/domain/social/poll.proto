syntax = "proto3";

package peers_touch.model.social.v1;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/peers-labs/peers-touch/station/frame/touch/model;model";

message VotePollRequest {
  string post_id = 1;
  repeated int32 option_indices = 2;
}

message VotePollResponse {
  bool success = 1;
  PollResult result = 2;
}

message PollResult {
  string post_id = 1;
  int64 total_votes = 2;
  repeated PollOptionResult options = 3;
  bool has_voted = 4;
  repeated int32 user_votes = 5;
  google.protobuf.Timestamp expires_at = 6;
  bool is_expired = 7;
}

message PollOptionResult {
  int32 index = 1;
  string text = 2;
  int64 votes = 3;
  double percentage = 4;
}

message GetPollResultRequest {
  string post_id = 1;
}

message GetPollResultResponse {
  PollResult result = 1;
}
